<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Manager Personal – Calendar 24h</title>
  <style>
    :root {
  --bg: #0f1724;
  --card: #0b1220;
  --accent: #60a5fa;
  --muted: #94a3b8;
  --glass: rgba(255, 255, 255, 0.04);
  --max-width: 1100px;
  --font-sans: Inter, system-ui, -apple-system, Roboto, Arial;
}
* {
  box-sizing: border-box;
}
html,
body {
  height: 100%;
  margin: 0;
  font-family: var(--font-sans);
  background: linear-gradient(180deg, #071024 0%, #071428 100%);
  color: #e6eef8;
}
.container {
  max-width: var(--max-width);
  margin: 28px auto;
  padding: 20px;
}
header {
  display: flex;
  align-items: flex-start;
  gap: 20px;
  margin-bottom: 18px;
}
.welcome {
  flex: 1;
}
h1 {
  margin: 0;
  font-size: 28px;
}
.subtitle {
  margin: 8px 0 0;
  color: var(--muted);
  font-size: 15px;
  line-height: 1.4;
}
.quote-box {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 12px;
}
.quote {
  background: var(--card);
  padding: 14px;
  border-radius: 10px;
  flex: 1;
  color: #dbeafe;
}
.btn {
  background: var(--accent);
  color: #04203a;
  padding: 8px 12px;
  border-radius: 8px;
  border: 0;
  cursor: pointer;
  font-weight: 600;
}
.btn-ghost {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.06);
  color: var(--muted);
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
}
.meta {
  display: flex;
  gap: 10px;
  align-items: center;
}
.side-info {
  min-width: 200px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  align-items: flex-end;
}
.week-nav {
  display: flex;
  gap: 10px;
  align-items: center;
}
.small {
  font-size: 13px;
  color: var(--muted);
}
.hint {
  background: var(--glass);
  padding: 10px;
  border-radius: 8px;
  color: var(--muted);
}

/* Calendar layout */
.calendar {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), transparent);
  border-radius: 12px;
  padding: 12px;
  overflow: auto;
}
.calendar-grid {
  display: grid;
  grid-template-columns: 80px 1fr;
  gap: 0;
}
.time-col {
  display: flex;
  flex-direction: column;
  border-right: 1px solid rgba(255, 255, 255, 0.03);
}
.time-cell {
  height: 48px;
  padding: 6px;
  color: var(--muted);
  font-size: 13px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.days-wrap {
  overflow: auto;
}
.days {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 0;
}
.day-header {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 10px 6px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.03);
  font-weight: 600;
}
.slots {
  display: grid;
  grid-template-rows: repeat(24, 48px);
}
.slot {
  border-bottom: 1px dashed rgba(255, 255, 255, 0.02);
  padding: 6px;
  position: relative;
  cursor: pointer;
}
.slot:hover {
  background: rgba(255, 255, 255, 0.01);
}
.event {
  position: absolute;
  left: 6px;
  right: 6px;
  top: 6px;
  border-radius: 8px;
  padding: 6px;
  font-size: 13px;
  color: #021025;
  background: linear-gradient(90deg, #fff 0%, #cfe9ff 100%);
  box-shadow: 0 6px 18px rgba(2, 16, 37, 0.55);
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.event .meta-small {
  font-size: 11px;
  color: #06324b;
  margin-top: 4px;
}

/* Modal */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(2, 6, 23, 0.6);
  display: none;
  align-items: center;
  justify-content: center;
  padding: 20px;
  z-index: 50;
}
.modal {
  background: linear-gradient(180deg, #041026, #0a1b2c);
  padding: 18px;
  border-radius: 12px;
  max-width: 520px;
  width: 100%;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.6);
}
.form-row {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
}
.form-row input,
.form-row select,
textarea {
  flex: 1;
  padding: 8px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: var(--glass);
  color: #e6eef8;
}
textarea {
  min-height: 80px;
  resize: vertical;
}
.modal-actions {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  margin-top: 8px;
}
.left-actions {
  display: flex;
  gap: 8px;
}

/* Mobile */
@media (max-width: 880px) {
  .calendar-grid {
    grid-template-columns: 1fr;
  }
  .time-col {
    display: none;
  }
  .days {
    grid-template-columns: 1fr;
  }
  .day-header {
    justify-content: flex-start;
    padding-left: 14px;
  }
  .slot {
    height: 80px;
  }
  .slots {
    grid-template-rows: repeat(24, 80px);
  }
}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="welcome">
        <h1>Bun Venit</h1>
        <div class="subtitle">Planifică-ți ziua!</div>
        <div class="quote-box">
          <div class="quote" id="quoteText">Fii schimbarea pe care vrei să o vezi în lume.</div>
          <div class="meta">
            <button class="btn" id="changeQuote">Schimbă citatul</button>
          </div>
        </div>
      </div>
      <div class="side-info">
        <div class="week-nav">
          <button class="btn-ghost" id="prevWeek">←</button>
          <span id="weekLabel">Săptămâna curentă</span>
          <button class="btn-ghost" id="nextWeek">→</button>
        </div>
      </div>
    </header>

    <section class="calendar" id="calendarRoot">
      <div class="calendar-grid">
        <div class="time-col" id="timeCol"></div>
        <div class="days-wrap">
          <div class="days" id="daysHeader"></div>
          <div class="days" id="daysSlots"></div>
        </div>
      </div>
    </section>
  </div>

  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-hidden="true">
    <div class="modal" role="document">
      <h3 id="modalTitle">Adaugă task</h3>
      <div class="small" id="modalDateInfo">Zi · Ora</div>

      <div class="form-row">
        <input id="inputTitle" placeholder="Titlu (ex: Antrenament)" />
      </div>
      <div class="form-row">
        <select id="inputCategory">
          <option value="personal">Personal</option>
          <option value="fitness">Fitness</option>
          <option value="financiar">Financiar</option>
          <option value="munca">Muncă</option>
        </select>
        <input id="inputDuration" placeholder="Durată (minute)" type="number" min="15" step="15" />
      </div>
      <div class="form-row">
        <input id="inputAmount" placeholder="Sumă (lei)" type="number" min="0" step="0.01" />
      </div>
      <div style="margin-top:6px">
        <textarea id="inputDesc" placeholder="Descriere / note"></textarea>
      </div>
      <div class="modal-actions">
        <div class="left-actions">
          <button class="btn" id="saveBtn">Salvează</button>
          <button class="btn-ghost" id="deleteBtn" style="display:none;background:#ef4444;color:white;border-color:transparent">Șterge</button>
        </div>
        <button class="btn-ghost" id="closeModal">Anulează</button>
      </div>
    </div>
  </div>

  <script>
    (() => {
  const qs = sel => document.querySelector(sel);
  const qsa = sel => Array.from(document.querySelectorAll(sel));
  const uid = () => 'id_' + Math.random().toString(36).slice(2, 9);
  const pad = n => String(n).padStart(2, '0');
  const formatDate = d => d.toISOString().slice(0, 10);

  const quoteText = qs('#quoteText');
  const changeQuoteBtn = qs('#changeQuote');
  const timeCol = qs('#timeCol');
  const daysHeader = qs('#daysHeader');
  const daysSlots = qs('#daysSlots');
  const modal = qs('#modalBackdrop');
  const modalTitle = qs('#modalTitle');
  const modalDateInfo = qs('#modalDateInfo');
  const inputTitle = qs('#inputTitle');
  const inputDesc = qs('#inputDesc');
  const inputCategory = qs('#inputCategory');
  const inputDuration = qs('#inputDuration');
  const inputAmount = qs('#inputAmount');
  const saveBtn = qs('#saveBtn');
  const closeModalBtn = qs('#closeModal');
  const deleteBtn = qs('#deleteBtn');
  const prevWeekBtn = qs('#prevWeek');
  const nextWeekBtn = qs('#nextWeek');
  const weekLabel = qs('#weekLabel');

  const QUOTES = [
    "Fii schimbarea pe care vrei să o vezi în lume.",
    "Ce nu începi azi, nu va fi gata mâine.",
    "Progresul mic, făcut constant, devine puternic.",
    "Micul efort de azi face diferența mâine.",
    "Nu concura cu alții; concurează cu versiunea ta de ieri."
  ];
  let events = JSON.parse(localStorage.getItem('events_v1') || '[]');
  let selectedSlot = null;
  let currentWeekOffset = 0;

  function getWeekDates() {
    const today = new Date();
    today.setDate(today.getDate() + currentWeekOffset * 7);
    const day = (today.getDay() + 6) % 7;
    const monday = new Date(today);
    monday.setDate(today.getDate() - day);
    const days = [];
    for (let i = 0; i < 7; i++) {
      const x = new Date(monday);
      x.setDate(monday.getDate() + i);
      days.push(x);
    }
    return days;
  }

  function renderTimes() {
    timeCol.innerHTML = '';
    for (let h = 0; h < 24; h++) {
      const node = document.createElement('div');
      node.className = 'time-cell';
      node.textContent = pad(h) + ':00';
      timeCol.appendChild(node);
    }
  }

  function renderWeek() {
    const days = getWeekDates();
    const monday = days[0];
    const sunday = days[6];
    weekLabel.textContent = `Săptămâna ${formatDate(monday)} – ${formatDate(sunday)}`;
    daysHeader.innerHTML = '';
    daysSlots.innerHTML = '';

    days.forEach(d => {
      const hd = document.createElement('div');
      hd.className = 'day-header';
      const dayName = d.toLocaleDateString('ro-RO', { weekday: 'short' });
      hd.textContent = `${dayName} ${pad(d.getDate())}/${pad(d.getMonth() + 1)}`;
      daysHeader.appendChild(hd);
    });

    days.forEach(d => {
      const wrapper = document.createElement('div');
      wrapper.style.borderLeft = '1px solid rgba(255,255,255,0.02)';
      const slots = document.createElement('div');
      slots.className = 'slots';
      for (let h = 0; h < 24; h++) {
        const slot = document.createElement('div');
        slot.className = 'slot';
        slot.dataset.date = formatDate(d);
        slot.dataset.hour = pad(h) + ':00';
        slot.title = 'Adaugă sau vezi taskuri';
        slot.addEventListener('click', onSlotClick);
        slots.appendChild(slot);
      }
      wrapper.appendChild(slots);
      daysSlots.appendChild(wrapper);
    });

    renderEvents();
  }

  function renderEvents() {
    qsa('.slot').forEach(s => s.innerHTML = '');
    events.forEach(ev => {
      const startHour = parseInt(ev.hour.split(':')[0]);
      const duration = ev.duration || 60;
      const slotsToFill = Math.ceil(duration / 60);
      for (let i = 0; i < slotsToFill; i++) {
        const hour = pad(startHour + i) + ':00';
        const selector = `.slot[data-date="${ev.date}"][data-hour="${hour}"]`;
        const slot = document.querySelector(selector);
        if (slot && i === 0) {
          const el = document.createElement('div');
          el.className = 'event';
          el.dataset.id = ev.id;
          el.innerHTML = `<strong>${ev.title || '(fără titlu)'}</strong>
                          <div class="meta-small">${ev.hour} · ${ev.category}${ev.duration ? ' · ' + ev.duration + 'min' : ''}</div>`;
          el.addEventListener('click', (e) => {
            e.stopPropagation();
            openModalForEvent(ev.id);
          });
          slot.appendChild(el);
        }
      }
    });
  }

  function onSlotClick(e) {
    const el = e.currentTarget;
    const date = el.dataset.date;
    const hour = el.dataset.hour;
    selectedSlot = { date, hour, id: null };
    openModal(selectedSlot);
  }

  function openModal(slot) {
    modal.style.display = 'flex';
    modal.setAttribute('aria-hidden', 'false');
    modalDateInfo.textContent = `${slot.date} · ${slot.hour}`;
    modalTitle.textContent = slot.id ? 'Editează task' : 'Adaugă task';
    deleteBtn.style.display = slot.id ? 'inline-block' : 'none';
    if (slot.id) {
      const ev = events.find(x => x.id === slot.id);
      inputTitle.value = ev.title || '';
      inputDesc.value = ev.desc || '';
      inputCategory.value = ev.category || 'personal';
      inputDuration.value = ev.duration || '';
      inputAmount.value = ev.amount || '';
    } else {
      inputTitle.value = '';
      inputDesc.value = '';
      inputCategory.value = 'personal';
      inputDuration.value = '';
      inputAmount.value = '';
    }
    setTimeout(() => inputTitle.focus(), 120);
  }

  function openModalForEvent(id) {
    const ev = events.find(x => x.id === id);
    if (!ev) return;
    selectedSlot = { date: ev.date, hour: ev.hour, id: ev.id };
    openModal(selectedSlot);
  }

  function closeModal() {
    modal.style.display = 'none';
    modal.setAttribute('aria-hidden', 'true');
    selectedSlot = null;
  }

  function saveEvent() {
    const title = inputTitle.value.trim();
    const desc = inputDesc.value.trim();
    const category = inputCategory.value;
    const duration = inputDuration.value ? Number(inputDuration.value) : 60;
    const amount = inputAmount.value ? Number(inputAmount.value) : null;

    if (!selectedSlot) return;
    if (selectedSlot.id) {
      const idx = events.findIndex(e => e.id === selectedSlot.id);
      if (idx >= 0) {
        events[idx] = { ...events[idx], title, desc, category, duration, amount };
      }
    } else {
      const ev = {
        id: uid(),
        date: selectedSlot.date,
        hour: selectedSlot.hour,
        title, desc, category, duration, amount
      };
      events.push(ev);
    }
    persist();
    renderEvents();
    closeModal();
  }

  function deleteEvent() {
    if (!selectedSlot || !selectedSlot.id) return;
    events = events.filter(e => e.id !== selectedSlot.id);
    persist();
    renderEvents();
    closeModal();
  }

  function persist() {
    localStorage.setItem('events_v1', JSON.stringify(events));
  }

  function pickQuote() {
    const idx = Math.floor(Math.random() * QUOTES.length);
    quoteText.textContent = QUOTES[idx];
  }

  saveBtn.addEventListener('click', saveEvent);
  closeModalBtn.addEventListener('click', closeModal);
  deleteBtn.addEventListener('click', deleteEvent);
  qs('#modalBackdrop').addEventListener('click', (e) => {
    if (e.target === qs('#modalBackdrop')) closeModal();
  });
  changeQuoteBtn.addEventListener('click', pickQuote);
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeModal();
  });

  prevWeekBtn.addEventListener('click', () => {
    currentWeekOffset--;
    renderWeek();
  });
  nextWeekBtn.addEventListener('click', () => {
    currentWeekOffset++;
    renderWeek();
  });

  function init() {
    renderTimes();
    renderWeek();
    pickQuote();
  }
  init();
})();
  </script>
</body>
</html>